---
# Source: polygon-id-issuer/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: private-key-secret
  labels:
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  private-key: NDU2NTE4ZTFlZWRlYzBkY2JiODUwMTMzMzEyZDRmNzEwOGIxYjBiOWMzZWI5YmYwNTA5MmIxMzY3NDY3NDkyOQ==
---
# Source: polygon-id-issuer/templates/issuer-node-api-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: issuer-node-api-configmap
  labels:
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  ISSUER_SERVER_URL: "http://localhost:3001"
  ISSUER_SERVER_PORT: "3001"
  ISSUER_NATIVE_PROOF_GENERATION_ENABLED: "true"
  ISSUER_PUBLISH_KEY_PATH: pbkey
  ISSUER_ONCHAIN_CHECK_STATUS_FREQUENCY: 1m
  ISSUER_ONCHAIN_PUBLISH_STATE_FREQUENCY: 1m
  ISSUER_LOG_LEVEL: "-4"
  ISSUER_LOG_MODE: "2"
  ISSUER_API_AUTH_PASSWORD: password
  ISSUER_API_AUTH_USER: user
  ISSUER_KEY_STORE_PLUGIN_IDEN3_MOUNT_PATH: iden3
  ISSUER_REVERSE_HASH_SERVICE_ENABLED: "false"
  ISSUER_ETHEREUM_URL: https://polygon-mumbai.g.alchemy.com/v2/xaP2_t9EUM2VYDgCgMI0k9KqDyJPvZ89
  ISSUER_ETHEREUM_CONTRACT_ADDRESS: "0x134B1BE34911E39A8397ec6289782989729807a4"
  ISSUER_ETHEREUM_RESOLVER_PREFIX: polygon:mumbai
  ISSUER_ETHEREUM_DEFAULT_GAS_LIMIT: "600000"
  ISSUER_ETHEREUM_CONFIRMATION_TIME_OUT: 10s
  ISSUER_ETHEREUM_CONFIRMATION_BLOCK_COUNT: "10"
  ISSUER_ETHEREUM_MAX_GAS_PRICE: "1000000"
  ISSUER_ETHEREUM_MIN_GAS_PRICE: "0"
  ISSUER_ETHEREUM_RPC_RESPONSE_TIMEOUT: 5s
  ISSUER_ETHEREUM_RECEIPT_TIMEOUT: 600s
  ISSUER_ETHEREUM_WAIT_BLOCK_CYCLE_TIME: 30s
  ISSUER_ETHEREUM_WAIT_RECEIPT_CYCLE_TIME: 30s
  ISSUER_PROVER_SERVER_URL: http://localhost:8002
  ISSUER_PROVER_TIMEOUT: 600s
  ISSUER_CIRCUIT_PATH: "./pkg/credentials/circuits"
  ISSUER_REDIS_URL: redis://@redis-issuer-node-svc:6379/1
  ISSUER_DB_NAME: platformid
  ISSUER_DB_PASSWORD: strongpasswordapp
  ISSUER_DB_PORT: "5432"
  ISSUER_DB_USER: polygonid
  ISSUER_KEY_STORE_PORT: "8200"
---
# Source: polygon-id-issuer/templates/issuer-node-api-ui-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: issuer-node-api-ui-configmap
  labels:
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  ISSUER_API_UI_SERVER_URL: https://5eaa-190-191-21-57.ngrok-free.app/issuer-admin
  ISSUER_API_UI_SERVER_PORT: "3002"
  ISSUER_API_UI_AUTH_PASSWORD: password-api
  ISSUER_API_UI_AUTH_USER: user-api
  ISSUER_API_UI_ISSUER_NAME: my issuer
  ISSUER_API_UI_SCHEMA_CACHE: "false"
  ISSUER_API_IDENTITY_BLOCKCHAIN: polygon
  ISSUER_API_IDENTITY_METHOD: polygonid
  ISSUER_API_IDENTITY_NETWORK: mumbai
  ISSUER_API_ENVIRONMENT: local
---
# Source: polygon-id-issuer/templates/issuer-node-ui-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: issuer-node-ui-configmap
  labels:
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  ISSUER_API_UI_SERVER_URL: app.example.com
  ISSUER_UI_AUTH_PASSWORD: password-ui
  ISSUER_UI_AUTH_USERNAME: user-ui
  ISSUER_UI_BLOCK_EXPLORER_URL: https://mumbai.polygonscan.com
  ISSUER_API_UI_AUTH_USER: user-api
  ISSUER_API_UI_AUTH_PASSWORD: password-api
  ISSUER_API_UI_ISSUER_NAME: my issuer k8s
  ISSUER_UI_IPFS_GATEWAY_URL: https://ipfs.io
---
# Source: polygon-id-issuer/templates/postgres-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-secret
  labels:
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  POSTGRES_DB: platformid
  POSTGRES_PASSWORD: strongpasswordapp
  POSTGRES_USER: polygonid
  init.sql: |
    ALTER USER polygonid SUPERUSER;
---
# Source: polygon-id-issuer/templates/vault-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: vault-config
  labels:
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
data:
  vault.json:    "{                                    \n\"listener\":  {                     \n  \"tcp\":
      \ {                        \n    \"address\":  \"0.0.0.0:8200\",  \n    \"tls_disable\":
      \ \"true\"         \n  }                                \n},                                 \n\"backend\":
      {                       \n  \"file\": {                        \n    \"path\": \"/vault/file\"
      \         \n  }                                \n},                                 \n\"default_lease_ttl\":
      \"168h\",       \n\"max_lease_ttl\": \"0h\",\n\"api_addr\": \"http://0.0.0.0:8200\",\n\"plugin_directory\"
      : \"/vault/plugins\",\n\"disable_mlock\": true\n}"    
  init.sh: |
      #!/bin/sh
      echo "VAULT CONFIGURATION SCRIPT"
      echo "===================================";
      
      vault server -config=/vault/config/vault.json 1>&1 2>&1 &
      
      # export VAULT_SKIP_VERIFY='true'
      
      export VAULT_ADDR=http://127.0.0.1:8200
      # Parse unsealed keys
      sleep 5
      
      FILE=/vault/data/init.out
      if [ ! -e "$FILE" ]; then
          echo -e "===== Initialize the Vault ====="
          vault operator init > /vault/data/init.out
      fi
      
      UNSEAL_KEY_1=$(grep "Unseal Key 1" /vault/data/init.out | cut -c 15-)
      UNSEAL_KEY_2=$(grep "Unseal Key 2" /vault/data/init.out | cut -c 15-)
      UNSEAL_KEY_3=$(grep "Unseal Key 3" /vault/data/init.out | cut -c 15-)
      UNSEAL_KEY_4=$(grep "Unseal Key 4" /vault/data/init.out | cut -c 15-)
      UNSEAL_KEY_5=$(grep "Unseal Key 5" /vault/data/init.out | cut -c 15-)
      
      TOKEN=$(grep "Token" /vault/data/init.out | cut -c 21-)
      
      echo -e "\n===== Unseal the Vault ====="
      
      vault operator unseal $UNSEAL_KEY_1
      vault operator unseal $UNSEAL_KEY_2
      vault operator unseal $UNSEAL_KEY_3
      
      vault login $TOKEN
      vault secrets enable -path=secret/ kv-v2
      echo -e "\n===== ENABLED KV secrets ====="
      
      IDEN3_PLUGIN_PATH="/vault/plugins/vault-plugin-secrets-iden3"
      
      if [ ! -e "$IDEN3_PLUGIN_PATH" ]; then
        echo "===== IDEN3 Plugin not found: downloading... ====="
          IDEN3_PLUGIN_ARCH=amd64
          IDEN3_PLUGIN_VERSION=0.0.6
          if [ `uname -m` == "aarch64" ]; then
              IDEN3_PLUGIN_ARCH=arm64
          fi
          VAULT_IDEN3_PLUGIN_URL="https://github.com/iden3/vault-plugin-secrets-iden3/releases/download/v${IDEN3_PLUGIN_VERSION}/vault-plugin-secrets-iden3_${IDEN3_PLUGIN_VERSION}_linux_${IDEN3_PLUGIN_ARCH}.tar.gz"
          wget -q -O - ${VAULT_IDEN3_PLUGIN_URL} | tar -C /vault/plugins -xzf - vault-plugin-secrets-iden3
      fi
      
      apk add -q openssl
      IDEN3_PLUGIN_SHA256=`openssl dgst -r -sha256 ${IDEN3_PLUGIN_PATH} | awk '{print $1}'`
      vault plugin register -sha256=$IDEN3_PLUGIN_SHA256 vault-plugin-secrets-iden3
      vault secrets enable -path=iden3 vault-plugin-secrets-iden3
      
      chmod 755 /vault/file -R
      
      echo "===== ENABLED IDEN3 ====="
      export vault_token="token:${TOKEN}"
      echo $vault_token
      
      rm /vault/data/token.txt
      echo $TOKEN > /vault/data/token.txt
      tail -f /dev/null
---
# Source: polygon-id-issuer/templates/issuer-node-pv.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: issuer-node-pvc 
  labels:
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  storageClassName: standard-rwo
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 250Mi
---
# Source: polygon-id-issuer/templates/postgres-pv.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: postgresql-issuer-node-pvc
  labels:
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm 
spec:
  storageClassName: standard-rwo
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi
---
# Source: polygon-id-issuer/templates/vault-pv.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: vault-issuer-node-pvc 
  labels:
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  storageClassName: standard-rwo
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 250Mi
---
# Source: polygon-id-issuer/templates/issuer-node-api-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: api-issuer-node-svc
  labels:
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: NodePort
  selector:
    app: api-issuer-node
    app.kubernetes.io/name: polygon
  ports:
  - port: 3001
    protocol: TCP
    targetPort: 3001
---
# Source: polygon-id-issuer/templates/issuer-node-api-ui-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: api-ui-issuer-node-svc
  labels:
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: NodePort
  selector:
    app: api-ui-issuer-node
    app.kubernetes.io/name: polygon
  ports:
  - port: 3002
    protocol: TCP
    targetPort: 3002
---
# Source: polygon-id-issuer/templates/issuer-node-ui-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: ui-issuer-node-svc
  labels:
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: NodePort
  selector:
    app: ui-issuer-node
    app.kubernetes.io/name: polygon
  ports:
  - port: 8080
    protocol: TCP
    targetPort: 80
---
# Source: polygon-id-issuer/templates/postgres-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: postgres-issuer-node-svc
  labels:
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  selector:
    app: postgres-issuer-node
    app.kubernetes.io/name: polygon
  ports:
  - port: 5432
    protocol: TCP
    targetPort: 5432
---
# Source: polygon-id-issuer/templates/redis-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: redis-issuer-node-svc
  labels: 
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  selector:
    app: redis-issuer-node
    app.kubernetes.io/name: polygon
  ports:
  - port: 6379
    protocol: TCP
    targetPort: 6379
---
# Source: polygon-id-issuer/templates/vault-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: vault-issuer-node-svc
  labels: 
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  selector:
    app: vault-issuer-node
    app.kubernetes.io/name: polygon
  ports:
  - port: 8200
    protocol: TCP
    targetPort: 8200
---
# Source: polygon-id-issuer/templates/issuer-node-api-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-issuer-node
  labels:
    app: api-issuer-node-deployment
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: polygon
      app: api-issuer-node
  template:
    metadata:
      labels:
        app: api-issuer-node
        app.kubernetes.io/name: polygon
    spec:
      containers:
        - name: api
          image: gcr.io/polygon-public/polygon-id/issuernode:1.0
          imagePullPolicy: "Always"
          ports:
          - containerPort: 3001
          envFrom:
          - configMapRef:
              name: issuer-node-api-configmap
          args: ["./migrate; ./platform"]
          command: ["sh", "-c"]
          env:
          - name: ISSUER_DATABASE_URL
            value: "postgres://$(ISSUER_DB_USER):$(ISSUER_DB_PASSWORD)@postgres-issuer-node-svc:$(ISSUER_DB_PORT)/$(ISSUER_DB_NAME)?sslmode=disable"
          - name: ISSUER_KEY_STORE_ADDRESS
            value: "http://vault-issuer-node-svc:$(ISSUER_KEY_STORE_PORT)"          
          volumeMounts:
          - name: vault-volume
            mountPath: /vault/data
          livenessProbe:
            httpGet:
              path: /status
              port: 3001
              httpHeaders:
              - name: Custom-Header
                value: Awesome
            initialDelaySeconds: 3
            periodSeconds: 60
      volumes:
        - name: vault-volume
          persistentVolumeClaim:
              claimName: vault-issuer-node-pvc
---
# Source: polygon-id-issuer/templates/issuer-node-api-ui-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-ui-issuer-node
  labels:
    app: api-ui-issuer-node-deployment
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: api-ui-issuer-node
      app.kubernetes.io/name: polygon
  template:
    metadata:
      labels:
        app: api-ui-issuer-node
        app.kubernetes.io/name: polygon
    spec:
      initContainers:
        - name: i
          image: gcr.io/polygon-public/polygon-id/issuernode:1.0
          imagePullPolicy: "Always"
          env:
          - name: ISSUER_DATABASE_URL
            value: "postgres://$(ISSUER_DB_USER):$(ISSUER_DB_PASSWORD)@postgres-issuer-node-svc:$(ISSUER_DB_PORT)/$(ISSUER_DB_NAME)?sslmode=disable"
          - name: ISSUER_KEY_STORE_ADDRESS
            value: "http://vault-issuer-node-svc:$(ISSUER_KEY_STORE_PORT)"
          envFrom:
          - configMapRef:
              name: issuer-node-api-configmap
          - configMapRef:
              name: issuer-node-api-ui-configmap
          args: ["sleep 30; ./migrate; ./issuer_initializer;"]
          command: ["sh", "-c"]
          volumeMounts:
          - mountPath: /did/data/
            name: issuer-node-volume
            readOnly: false
          - mountPath: /vault/data
            name: vault-volume        
      containers:
        - name: api-ui
          image: gcr.io/polygon-public/polygon-id/issuernode:1.0
          imagePullPolicy: "Always"
          ports:
          - containerPort: 3002
          env:
          - name: ISSUER_DATABASE_URL
            value: "postgres://$(ISSUER_DB_USER):$(ISSUER_DB_PASSWORD)@postgres-issuer-node-svc:$(ISSUER_DB_PORT)/$(ISSUER_DB_NAME)?sslmode=disable"
          - name: ISSUER_KEY_STORE_ADDRESS
            value: "http://vault-issuer-node-svc:$(ISSUER_KEY_STORE_PORT)"
          envFrom:
          - configMapRef:
              name: issuer-node-api-configmap
          - configMapRef:
              name: issuer-node-api-ui-configmap
          args: ["./migrate; ./platform_ui"]
          command: ["sh", "-c"]
          livenessProbe:
            httpGet:
              path: /status
              port: 3002
              httpHeaders:
              - name: Custom-Header
                value: Awesome
            initialDelaySeconds: 3
            periodSeconds: 60
          volumeMounts:
          - mountPath: /did/data
            name: issuer-node-volume
          - mountPath: /vault/data
            name: vault-volume 
      volumes:
      - name: issuer-node-volume
        persistentVolumeClaim:
            claimName: issuer-node-pvc
      - name: vault-volume 
        persistentVolumeClaim:
            claimName: vault-issuer-node-pvc
---
# Source: polygon-id-issuer/templates/issuer-node-notifications.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: notifications-issuer-node
  labels:
    app: notifications-issuer-node-deployment
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 
  selector:
    matchLabels:
      app: notifications-issuer-node
      app.kubernetes.io/name: polygon
  template:
    metadata:
      labels:
        app: notifications-issuer-node
        app.kubernetes.io/name: polygon
    spec:
      containers:
        - name: notifications
          image: gcr.io/polygon-public/polygon-id/issuernode:1.0
          imagePullPolicy: "IfNotPresent"
          envFrom:
          - configMapRef:
              name: issuer-node-api-configmap
          - configMapRef:
              name: issuer-node-api-ui-configmap
          env:
          - name: ISSUER_DATABASE_URL
            value: "postgres://$(ISSUER_DB_USER):$(ISSUER_DB_PASSWORD)@postgres-issuer-node-svc:$(ISSUER_DB_PORT)/$(ISSUER_DB_NAME)?sslmode=disable"
          - name: ISSUER_KEY_STORE_ADDRESS
            value: "http://vault-issuer-node-svc:$(ISSUER_KEY_STORE_PORT)"
          args: ["./notifications"]
          command: ["sh", "-c"]
          volumeMounts:
          - mountPath: /did/data
            name: issuer-node-volume
          - mountPath: /vault/data
            name: vault-volume 
      volumes:
      - name: issuer-node-volume
        persistentVolumeClaim:
          claimName: issuer-node-pvc
      - name: vault-volume
        persistentVolumeClaim:
            claimName: vault-issuer-node-pvc
---
# Source: polygon-id-issuer/templates/issuer-node-pending-publisher.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: pending-publisher-issuer-node
  labels:
    app: pending-publisher-issuer-node-deployment
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: pending-publisher-issuer-node
      app.kubernetes.io/name: polygon
  template:
    metadata:
      labels:
        app: pending-publisher-issuer-node
        app.kubernetes.io/name: polygon
    spec:
      containers:
        - name: pending-publisher
          image: gcr.io/polygon-public/polygon-id/issuernode:1.0
          imagePullPolicy: "Always"
          envFrom:
          - configMapRef:
              name: issuer-node-api-configmap
          - configMapRef:
              name: issuer-node-api-ui-configmap
          env:
          - name: ISSUER_DATABASE_URL
            value: "postgres://$(ISSUER_DB_USER):$(ISSUER_DB_PASSWORD)@postgres-issuer-node-svc:$(ISSUER_DB_PORT)/$(ISSUER_DB_NAME)?sslmode=disable"
          - name: ISSUER_KEY_STORE_ADDRESS
            value: "http://vault-issuer-node-svc:$(ISSUER_KEY_STORE_PORT)"
          args: ["./pending_publisher"]
          command: ["sh", "-c"]
          volumeMounts:
          - mountPath: /did/data
            name: issuer-node-volume
          - mountPath: /vault/data
            name: vault-volume
      volumes:
      - name: issuer-node-volume 
        persistentVolumeClaim:
          claimName: issuer-node-pvc
      - name: vault-volume
        persistentVolumeClaim:
          claimName: vault-issuer-node-pvc
---
# Source: polygon-id-issuer/templates/issuer-node-ui-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: ui-issuer-node
  labels:
    app: ui-issuer-node-deployment
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ui-issuer-node
      app.kubernetes.io/name: polygon
  template:
    metadata:
      labels:
        app: ui-issuer-node
        app.kubernetes.io/name: polygon
    spec:
      containers:
        - name: ui
          image: gcr.io/polygon-public/polygon-id/issuernode-ui:1.0
          imagePullPolicy: "Always"
          ports:
          - containerPort: 80
          envFrom:
          - configMapRef:
              name: issuer-node-api-ui-configmap
---
# Source: polygon-id-issuer/templates/postgres-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: postgres-issuer-node
  labels:
    app: postgres-issuer-node-deployment
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: postgres-issuer-node
      app.kubernetes.io/name: polygon
  template:
    metadata:
      labels:
        app: postgres-issuer-node
        app.kubernetes.io/name: polygon
    spec:
      containers:
        - name: postgres
          image: gcr.io/polygon-public/polygon-id/postgres14:1.0
          imagePullPolicy: "IfNotPresent"
          ports:
          - containerPort: 5432
          envFrom:
          - configMapRef:
              name: postgres-secret
          volumeMounts:
          - mountPath: /var/lib/postgresql/polygon
            name: postgresdata
          - mountPath: /docker-entrypoint-initdb.d
            name: postgres-initdb
      volumes:
      - name: postgresdata
        persistentVolumeClaim:
            claimName: postgresql-issuer-node-pvc
      - name: postgres-initdb
        configMap:
          defaultMode: 0644
          items:
          - key: init.sql
            path: init.sql
          name: postgres-secret
---
# Source: polygon-id-issuer/templates/redis-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: redis-issuer-node # check if labels need to be added.
  labels:
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: redis-issuer-node
      app.kubernetes.io/name: polygon
  template:
    metadata:
      labels:
        app: redis-issuer-node
        app.kubernetes.io/name: polygon
    spec:
      containers:
      - name: redis
        image: gcr.io/polygon-public/polygon-id/redis:1.0
        ports:
          - containerPort: 6379
        resources:
          limits:
            cpu: "1"
            memory: 2Gi
          requests:
            cpu: "0.5"
            memory: 1Gi
---
# Source: polygon-id-issuer/templates/vault-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: vault-issuer-node
  labels:
    app: vault-issuer-node-deployment
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: vault-issuer-node
      app.kubernetes.io/name: polygon
  template:
    metadata:
      labels:
        app: vault-issuer-node
        app.kubernetes.io/name: polygon
    spec:
      containers:
        - name: vault
          securityContext: 
            capabilities:
              add:
                - IPC_LOCK
          image: gcr.io/polygon-public/polygon-id/vault:1.0
          imagePullPolicy: "IfNotPresent"
          env:
          - name: VAULT_ADDR
            value: "http://127.0.0.1:8200"
          - name: PRIVATE_KEY
            valueFrom:
              secretKeyRef:
                name: private-key-secret
                key: private-key
          ports:
            - containerPort: 8200
          command: ["sh", "-c", "/vault/config/init.sh"]
          volumeMounts:
          - mountPath: /vault/plugins
            name: vault-volume
          - mountPath: /vault/data
            name: vault-volume
          - mountPath: /vault/file
            name: vault-volume
          - mountPath: /vault/config
            name: vault-config 
      volumes:
      - name: vault-volume
        persistentVolumeClaim:
            claimName: vault-issuer-node-pvc
      - name: vault-config
        configMap:
          name: vault-config
          defaultMode: 0500
          items:
          - key: vault.json
            path: vault.json
          - key: init.sh
            path: init.sh
---
# Source: polygon-id-issuer/templates/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: app-ingress
  labels:
    app: issuer-node
    helm.sh/chart: polygon-id-issuer-0.1.0
    app.kubernetes.io/name: polygon
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    kubernetes.io/ingress.allow-http: "true"
    kubernetes.io/ingress.class: gce
    networking.gke.io/managed-certificates: polygon-cert
    kubernetes.io/ingress.global-static-ip-name: searce
spec:
  rules:
  - host: app.example.com
    http:
      paths:
        - path: /v1/
          pathType: Prefix
          backend:
            service:
              name: api-ui-issuer-node-svc
              port:
                number: 3002
        - path: /
          pathType: Prefix
          backend:
            service:
              name: api-ui-issuer-node-svc
              port:
                number: 3002
  - host: ui.example.com
    http:
      paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: ui-issuer-node-svc
              port:
                number: 8080
---
# Source: polygon-id-issuer/templates/application.yaml
apiVersion: app.k8s.io/v1beta1
kind: Application
metadata:
  name: "polygon"
  annotations:
    kubernetes-engine.cloud.google.com/icon: >-
      data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAzTUlEQVR4Ae3d/3Ocx33Y8d3njrRjecbwiMykM2l5IK1EiWwL8ESyJIsUkH9A5I/tdEZAW9fjfCnJaZsZ13ZwsJu6kzpD0k3rTJ0EoNtMfovof8A8iVSoWmkBO1akRBZxmjSTjkWNkRlaikE8z2b32d3nee5wwO3dPXjuQLxfNoVvD+4e3Jdndz/72c8KAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGDMpEClmk9sNERNnNeP/IwSclMKdaV5c7olAACoEB2AijTnNqZqW+J8IsUFJcSU/ieklEqZ50DKVVlLlput6bYAAKACdAAq8KWnfrCgRHRJP9q24RdZwy/s10Ip2xtoRvWjV5utf9QWAADsIzoA++jLT78xJ1RtSTfsc0rqpl5JM+y3jb+jG377iekMpD+RbT01sPzlG/9kVQAAsE/oAOwDM89fj5KlRKkF07CbEX9ixvvKjPSF6QqI7KE3w/80GCBFYjsA/mbaUa12rtn62XUBAEDJ6ACUKJ3n//vt80JGF/QD+yGVx/p1w29iAObhNh9URydASfd52vjbXkL6eTo3IFZrtSPLTAscXg8df2omVvWzex2je5ftN9++sSoAIBAdgJJ8+cm/PBup2iXddjfM166BTz+YjoB5qJWf8U87AeY/bsSvilMBaUKAjQW4HAF7G7L5H1/8x8sCh86p46cX9AtiZa9j9Mum9eadG/MCAALVBUbylSfemNON9JJuqZ9JpHJjeN+vSofytqVPU/6knQJwLbywB5tP0gNV4XajyOYEyDxRsPmF03/9nP71L335xs+uCgAARkAHYEgm3H/0ve0l3bZf8KP4QmTfjedtg5+O8F1L74MuWRdB2DkCGwwwjX76XdtByA6wvQgZyWndKVj5wjN/fb4u6+eYFgBw2Jw6dvq6vijO+a/1pXH1zXduLIoBTB8/s6ovss+J0W2axG19W5t6+LcuZfTCkUisv/7/W21xANABGMJXHn9jSby3pef65Ydte5220aowm5+G8d3n6fy/9PP9Wcu+++xLZJIG065DektSukRBNx9gbnlmW21vfPGZv1mtyYj8AAAYjyl9UZ9x7cCcUvGFrUSIk8fPrJsib0dqtdYkdwYigWBfeeK1uf/8yb/ckDJp6i8/bBp+2Rm5t2y+n/5f4lp9YXP70i9kGhSQfmzv/xV/3WcEFDsLysYRZHrjriegkoV7Kr7+H8789ZIAAEwG0ylQYmVrO944dfz0ysM/M9cQE4gOQADd8Dd++5OvX4+UvK6f2YaweX0qG6Hbw2TWMqchfeUi+ypN5kuPS6cJ/DDe9gJcsn/akTC/bz93X7tbVonIQwg7OhyqEUnZ/Pzc32x8/szflhHSAgCURF/yF0xH4OSxMxM3UGMKYA+X9Dz/9rtb51WslpRrgF1Sns/rcyF9G+N3of5sWj9RrvEvzOOnAX6hmsmR6Eq0Jc7qtn1J9wwawrXs5kbsksE8L8B+031eSCLI8wjT4EBDyHj188/8v7kjssa0AAAEMqtojmzXBsojiI9sTSkVTemrfEO3BjP6Iv1oMTdhJ9U8efz0wtFabX5SpgXoAOziq4+9fn77x+819ZM7JbJ1+uaja8vTT92A31bxU+7bvgeQB/rt75tDXqi/Ty5+rnWy7e5mtfnERkvUE7PMa0naAL9U+epAex/Zbfl5AJndte0BuCkHm4dgpgUWdEdglY4AAIR5fXP0RrnRmJuq/Tg+q6/Sz/XsDOiBmo0GnL54+86Ny2LMmALo4Xcee21FieSyShM8XBvsl+xlyX02oG8+13Px6ejfz+VnY/70QxrVb+tjfvmLtz4y/7muDX+aL0+3l26eaopYTutfWZX5SN/ej/48sveTLyOw4YE82iD9NETH7MDCvST5dnPubxsCALDv2u3WpinIZWpyJPXatIks7HLopUmYEqAD0OV3Hnt1QTej6Vy6dOv5ZCHOns/5256Bz+WXShaq+Lrp+0RsShld+PytUye/+PJDrb3u13QEmi9NL6pInNNzB23hiwLr+0hXBHTN/Nu78kmGOxIRfb5hY0sllwQAoFJtHeY3HQF9IV80SwV3HqGnBMbcCaAD0E2JZ/1yPve1j8XneXgmFG9X+Pupf5Ut0nOL/vX/r9z7qfq0bvyviAE0b0xfa/7p9LS+2UV9H23zPdcJkdnt64Zf+U+z+1RZMWEhCjMUSj0jAABjYSICSS2a15flHvu6qOapB8+MLXmbDkAX3YxOFb/yyf425G97A9KO91UW4s+S9tJGuFVPxCc+f+vnLjRb05tiSLojsCpjMa9v+2q6iZCyd2Z+Zu9f5PMBhQ6LKnQL3FTClAAAjI2JBiTb0by+Il/r/pluPS6Pa5kgHYAu9gFR2VK8bFyvVLYKIJsGKAzDdUPcFjKa/9zLPzf/G6/8XCk7+KXTAjemF0RdndS3/y2ZzTLol0wiVGGjgCz6IPNliUralYRSAADGqr3Z2tRTAud65AVM3duOV8QYsApgN2ldP5dol1ftl76Sn1vpJyIlN/Xnl9/7wNEro4z499K0iYPnmqc3FnQTr+eMZEO6pIP0pOxOg+78soxAqVSPIkUTKM2cfVfMqSRu6DN+tPgz/ce8JaNofdzlNc051u+KmUTEM/oBPyETNTWJ53k/2+s5UJHc1O+G70aitv7G262J2kL74am5xr0j8Zx+P+rXtzpR/Jl53ej/bprz/sGdVktMkOy8hXy0+7HWI6K3JvGcD4J4u3YuOpKs6cew4b9nVgycPHb6QtUrA+gA9CD9kj9lA/w+H99X+3cBdxlJufruTx29uF8NfzczLaA/rP7m0xtNfe/PmReQXTroNhNS/tP09FRHLsM+aujwVRQn13f7uT6xddPz7f7+R47N6YtLvKTumouMtfOM9R+VxMKW1zzd1j9erqq8pmlworvxgr7PZ/U56obHTaco1fc89V997WgtujKuzkBjSp97XT8ncu8poN2em2GlOxemndS96dfpxTd/eOOaCFB4nez+HNglsiLW/3OP/2X9+H+r+/E3F1l95+d3vTOlrpRxETbnnMjkWX17C1sinspWBfV43RiJOe9jpzfT0aEU3ypja2d3DruOLHs99/Y1n5zX57CwpeJGz/NWXecsxTXdGbgyaR2vSWUiAR859vRiImT3NXNJP/6rZiWBqAgdgB7sLnwiy7zLh9H5kFrH1tu/8fLPL4ox+NLN6eZvnn6roUcUJ+wp5ikBiU1IlPm6xYoUerM7ftSVh2D2t09U7ZK+gMyJge5DNPRtmfKa+sJzppl8MLqyH2+W7CJ4N76gv5wa+FE0RZmEuqDP84JuEFd1h2W56o6AucicfPDMC/o8zu91nDJ/rv57S3sclVlBs/trwYsfqLX6HeMb/mFeJ/o/l7fi+IJuoDoa9LQzp/Y6PzlSzkzHOQ/+9jOvNbOG/KzuxCyZzu7IHYEB3pdpRrp7zQ9w7lOm0p3ueC2M67V+EP3gzs3WyQefvtLVGTXXHfP4N0VFyAHoIkWx1J7KvufT6/Ia/uOPrku3+CDvnLvG33wmEiknZ/Z/yoQTzScnj585H6va2t4Vs0KoZvTjeM10JkSJzAU8+rEOz+nbFyUkUI6zDGgkk6ARtrvojMxEgkKeV/263HOUYzokugFc0Y3o9ZFeJ2lHQFw6dez08+Y2029J2RD7wNy+uZ+Rz9kznV0lVvTjsLGPCWJTjeNzM+Z50+/LkV/z6Ws9jq+f+unTZwX6SuJ6U5jdBDvs3WEvGx2ALkoHttwnvvCOL8Ynspn/igfXvciOJMAsApq1+XYJoP/p+N07KmbSRlCp8ua49EXSdCbSsG4JzPmZC7hQ/Uewg0vLgG5Ume1rRhm91x93kaVsiypqceBIXda+tduP0ukk0wHTjYkoiRlV69u8bm57P55b0wk155yO3suWVY7bnw5kTcTn0+k7pcrpSJuOSyKeH+fStoPCROn0m6F7mfiUnh6YExW5rzoA/3Vmbe5rM2sL5qMYVt7YZ41p/kn+cynHm2AnI58CKFy1YSULUQkVuWUKPiIwdkl83o0w9sOlUTsBZsS5j+dnmYu5HiFVuuRHiasBxzRKuego0f+iL0X7zR+2ekYmslyS/eiA6QYu0o+9KJlp/HUndJ86jUX7UzTGjNr349z1TORqlQ3ZQZVsR2ZA1BEFSGRUWQTlvugAfF03+P9tZm1Nt4nfjqRc0Y3z9d+dXd/QHYFhHkjVMWhWKl8M2Lnsb6wNa2IiFW7DgGzJYsptGWxLFCilJiMCUEpYdG+Xhg096gvrpTJHnHuquBPgLjD9jxvxohMc/t+lNGqad7Ffjb9npwRKkzX+ldXaGH/luEEkQmZTL+jNRAH0e6IzeVKVE5ELcaA7ALrhb/z3R9eu66bQzLvNqOIoWMkT+s/7k9/9xPrK159Ya4TeppTZ1jt5w+p3AhSFIjxjFolIKVXsrKTlgm0XRQmR5wIcHjr0OPC+2/aCqkqZQgjmOgFVXBzdBabV90B90RnlfELD/7pL2jMiEd1NlvZ/FF0e0+GJRf15UXmhrfFWjhuQ2RiHUuT9yB1RujQ3Q1TgQHYAVmbWpr7+8bWlRCmTuDJnWrxIdZfDcxX69Mhu+yeRjgZ8d8l0GPreuEvwywf9yq39d+X4lBtWj3tknSSyUPQnlU4LFPMVxAErBGTmq/2/HckxQQYqqJHOCQ8b9k/PUa4Pfa66E6DnjSsZzenXyXLAYXYXs2EFhv/TvIQuJvFyuE6YXNev91X9cdn8S6usheQ8lKBmXmfDdVg2s9fOcK/xsVaOG5S5/h6Ucx2X+F5tx5RYzdS6qMCB6wD83sfXzr+nkg3duDel7327obmfrHfr4lShjp/5RvOejK5/7RPfWwi5n7zVVNmoP92Zz1bgUeOfW4/y1j/tr2SZgFkUIP2gEjHJ3Oj0YvLB2odvv/3idPbvzo0P12Q8q2TAHHaBCUOHzj3uVbtgt3M1G3tk53rnxdlRzlU/OxeqmCd1jW7/xiakEe8hNPyvH8GeyX97rVXvQf8dajl9DvTj/+Y7Nxb1x6b5Z9a0m+cjEmp+4OdiALbWwUBTWuk5H92upa+V7LWjP093jNt1s5hd7XfluPR8zeNoH+cb0nwsPK4DdVy24nJWmdyv0mTArudftzqVdAAOTB2Ab8y8Mqfn23SYMJlztfmUK4WvfNF7PSrOPrUFe/NGOl3UJ9P1wStfm/3eb8Yq/uWL67Pt7vtJp9WVEqIj1d/vxucKA2X7AoxTIpWvSCQKVQE7Dxp/P2V3+iKSLL955yU7R31n5wFvvP2nZpS0oBuYph5xXQrNsnaFaFp7HZNexENHcHrkqidcFrPR69ui0nMth8k2Vkt7n4uYG6YmgAn/h7wbjtZ25iOkxWpMwZkQ+nk4WqvNp+vM7+x+mHueWiePfUo/J1HpIWj7nAW+/6W6kjxQb+72mLbtmvlV80+fr24oI/Mc9Z1W8B3dXhGVkXSfr3uc3dct8890+AZ5jbs5bToBezBFmUxNDv+1qmg6bOIjACZs/z8e/T8rOuJ9Xbqd7Wzqm10Dn9a98fP+NikurRGmOrPi7U/zyH6jVqt9u9f9pUWA3D3Yb+RNqJR+d4CJSAMQxe2IlYsAdHZ7lBh/R6WnTT1inr/tG/8+3Laa50RYKDsoChBSrS7lGp3QC+1+nGsZIpG0go4bpiZAQOTARE96FYhJZBwWdSg2/oHM68uMWkWJTMcxPPSvlm+/ffNCaIfKnK95X4jAEXbwazhY2Plmr3GlQnc6rWxO+6DSg7m3il/rpuZRUYGJ7QCYef5vfPyVpSjeXtON24L5XmGa35fn1X+AzNfCpa21MlPhSmb/RNaIZ7+f5gb0bsSl60R0LQFUvjFVedW9MYs6EgCKxYBcx0d1/2RS6PO+6EbMA7l952ZTBo6W98pqT+ecQy7iQzQ6njnX0DB0+RfynUwHJuixk2Y77HDB4f/dHovA1RfDPg+245ZcFCXR143AQi26MdWvATEg877QnZag0sw+YiNKMfj53n7n5gXRc4vbnSIVliR6aMnh8kFGNZEdgD/82Nqz9+J7prBGUzfIU3mrn4flZcc6PNvwSzfrr1wKgP+Z9C13YXMcudtGOcr+UOTpA+7u/JK7Cdlgx8ztF5p41+ERpumz31O+6zJRIQBTBW6U8qZxvbYoguazd19KEzrq1A/gSGVN1b2aGU33PVezgqWKFQH6fr7V/yA1M0hEIjT73+zf0P09m/zXn3nNjPI82EiTHLjD2c0mjQbMzeqO4zCNv5d2WgJH12avCjGqEc43Cu1c7VMFxvuH6rxOqGpWl0xUB+AbH31l7vc/+sq3Y3HvmjR17pUL2vskN/0hyuff3SL3fGve9PNCgR7l5+7tegCfJuia9N3C+KrjUxsRKI6olZSiY/3dWKRbA2ePiz0v9yE/Lz8lMEFMrXAxAjtnKkMujln54Z3knOjHFKwZsQ77LpW+epmq393e9xBpsl1bFQEdkoFqAowS/hfJnAgw6mvGUkHRmL1E22GrJEy+iBhR7zKxO+nHdqCITU9KhIbydwitNqkO0BLPcZA7IwCHpwNgwv1/8LHvXNIN63X9Upl3eXZuFJ9Iu5wtG9B2Ln1zI3LzvciGv7OfZ1MBbu7fJgWoYi5AT7L4MasD3NmQTkR2XeRPUWVTIDJLWCwuB5wMZgRaxkYhocVtzFam3d8LLQdrRv+iBL0qffU8roLqX2mHRMn+DWFgTYBRw//6hdp3nnO3zsOgXOdnJPpcnul/kFwvIzEv9Lky0SMxokT235hp7xvoH1nSDc2HBHalVNX1JKyxdwBWfvF/LyXbWxu6EbtQXNVm8/js8N1+U2XhbL/OLZ0QUEmamqcK8/OqWL2vMBWQtYV918arjuUDeYNanBaYgIZV+dB/+oUs5P6pYuLipIikuCZKYEfWqm9It9dSmvp2nmm7l/iBWmnnKrsrffVQWdZv2AZBU7V3+zfsgeH/zT0ey/7Z7lJ+V5Sg11KrQamAXQ71Qf2nWQKFPle7R7rCtEfdxleqtsCIunah1BFIUYGxdQBWPnprbuWRlzfM+nzdWH+oOFq1Y3q34M4dL90kf0fjLGzGvo8K6P/ocFRyTn/e9qsA8ja/oLBTTm95V2T3aP94G1aVdYaK9Y/seUay88BJEYvayPOwGRW90O8Qmagdo44kpMCGHsWVuc1wyNx7VVm/wRsEpXs39BES/tedvt0ey6Cd+VR5jYtZaiVG0n/+P3S1RYjt7XrQ+ZqNtsQYyTElsN1XdkQAZCWPaeUdgJWZW43VR17+tm6Xrut/Jzpy6nwKX1cj35F93xHezj7fjGS08Nn1T8z/yvovXfuV735iWr8qF/VvvOVHx+5A2VnXf6eo8LNsZC1lVmso/8XxNqyyI4dBdX6QIk8AnJz2f/SRRlHIqEP2Gu333+9dj8bfEiXSr7l234OqDAEGbBDUL8M8uPa/Gm3uvczGRccK/04MqTEVlqRZ3663RUmCoxYqHkv4GOXR1/MTHV8rdf91AK7qcL/cErf1BXY+nZmXWYEd6ebaXQa78Jn7wn7TDf39jED2E7GpRLL8PhlNf2Z9tuNC86vrs6v6j5vXnzbdrbjiALZtjPYcwNt+iHLTDMW0Qvd1tmvw2CT2PIpTFdL3T9IVAsouXRjzroX7ZeiGIaChjZT4kSiRlLWQc63sIh6aQ7FXTYCg8P8upX/HJVJq+Hno94c9P69vjp6v0EEljK4Pge7ppbKmvvqprANw9ZFbz+lWs+m/tlnsxTX8wjVe2d472TDWtfkyH5qniXytJKrNfvZ7jzUX12d7vkk+uz7b1h2BZf1HTuvf/6ZdB5j4WoE9G8YkUR0j/4zqSECQcozZE19+emNOn+QzbpVDluiYLnWQ+RJHG+1IJicJABMhdIMg/eJ6ZtcfBmb/73lAQONWZknUoDn8CSMrCgVjfGx0qet1rqrJq6isGVOJKeaTL0uzFXyFKI78/Zy+L8fnp99VIbPfJFRFkZj/13/+S/Of7VHKtxdz3K+tzy7oWz2nb9b9Tu/lcWmtfzt0Li6xcx9UYR1h9ZpPbDR+66k3nxeJ+rY+jYZNfMgeG+kerOx7qrAi4H4zdNbsGOYrVViIttLzCtkgSO1SpbCs8L+SUd9Rjr6NUnIjel5k98GoCXndgvIkcKDVajujaZEYNV8lTGUdgLTByj/PGnab6Cc7i/oI3wewrZpb27+pEnnx0997bPbT64+1xBB+fX322q+uz0wndp1uu+dB5pwSu+SgEAFwRQRsGxulJQiqy65rzm1M6YZ/qS6TNR3cP2vrHQi7CsBNVXiysP5BiskqAlDqxVHJRr9D9GPVY863/9yaisptKFTPXIQuFXdMQjcI6rU8sazwv0yqK5JUOzLCTociq9nf13Z9uyHKFLJkVZGFf5CpaEcth82qps4qDGSrQvK9q84nsoz/9IhCAoDs7Cyor9VrR6Y/8+pjQXOX/fyb9dnVB9Tu5TZdooDM6+v7aESekLhbw/rVx//i7KWZjdLmc3/riR8s1H8Sm3LITX1WU1n9//xxs4+YUj51oTM/coKWAfZalz8s3Sfsv4a8RwJVWEKeKrUyX8j68aDzKl1AkaJeNQFCdg0MWMOuX7Qt0d/UUPsTdBtyp8MOAQl5SYlRhtBKiduyzjTBQaY6N1WSJS2XDlHpTLa0o+rOlXm2NcsbfJcH4L5qRfX45L/6/uMXdpvnH9ZetyfzllUVdxcs/NynJuyUiPPxkffWvvr4ayNdcL7yxBtz/+nJN67rB2RF+OhJYaRvV0oUShsXCiKlH5XfHHiC5gBUCVXLxAAh6B5htPhI2FLEMivzhZxrVUk/RYFL1jqqFIY+9kfr0Wq/Y+I4tACNOj/KnvJDbN/bU8gyQinKeY0boSWrS11dg0qlm0t1JwDLWmm1JPqpOJUtjVvn8/0+a11IUVyvZubpE5HM64Z/fnH9ybaoUJYA6NccFIoKuSl31TcLwCxvVGr1q4/9xcalJ15riAGYcP9XnvirFf0oXden8Uwa5s8WQEjVERkRNvPfrY+UvihC599SxVazYfotLQsVWn++V90BF8oNST5bEiXo+QbvQcqoJSoWukFQ8bEIeexlYPW+0GREbWorTp4f5rWTdliUKGVLYP36fSHgmBJ3d+xfslpO0Psbg9txnTElyH/Yul8jAPnSteKue7LjZ3L9X7z6yelPf//JlhiXtKBwIZRuG9bC9wPC6rYA8Yk4Fre/+snXVvp1BNKG//E3lt733vZt/eWCHb8nMp/TVyLP+hfZagSXK+FW/GcJgMoeKzdlffS65CWain6cjNSw2hFoQOOs30i7jozCSqyOfCE3DVZoRyL+wHgu5CFFijo6biGh9MBdEO2hYdsmm2kZ/dq5Pkgk4KHjT81EcXJdlLTEsibjVshxZXQeTx47sxQy/x/y/GEynTx+5vyO51iNvmfFIKrrANghrJ1fzzf3cdF2JbIhrpiIda9Suh6AdMkLLj9BFpcm9pI+oNluxLaPoxKxsJ3Itf/y+Gs9Lwwm3P/+97bWZGTm+dWHs5OwyYbu84J8eYT/UrpAQfa1PtOW/vl8szXdFpNEqQujNKxRHAddGPcaGQWWWDXdr5VRQs967jr4XMusPDiI0A2Canfj5089eHolJJTea+e/3QRXJjR0J2Arjq+7qMquTGfFNKCxqq2JEkss2y2s++8qaB6jk8dOD523YHcd1NeCAEfrtcpGiyiP25Ok2fFNs/14vb4qKlQXlbFtvpTdK9Ok3czGrfbvW6a/Aj4HILG9En9C/iT3lLiD7E6FslCTT31If9787cdfW4hE1Px33/n5q5ce+6uZn0TJJZkkz/iOkSpUHlRZLYLCNsdue8LuxzGfJojauulpLt08UWlPchCuYR14f3c3KloIOXavJWim0dG973bfxkGJhmlwhj5XocIagQFGzGUzYfiTD565qh+wPUv/pg1/SOBriA2fZKIu6lf280EH6+dE38fKyeOnl0zHSb9hviujWttUwzNLQ80cvLqblnsuLYmzixlxh+SHXDr14JkfvfnOiwM9t6ZhcFGLvmRJGyWhevo5Nq/3ruRadbXq57O6ZYC+LXTZayJPV7fD5WyBvRLjlZb4S08p6qwFIH0zLPcosJs/oMUE/Dxqr797QncsVn778dfXtmS8pm9rLnsoVCGyULgPO8K3D1Gem5BPn7h729R3vpwcEbNLL01u459yDWu/kZznRnSXQkdFIUvQdIMRtgWqO9eHjs8FJQUOc66jbjs8qtCISNhtDZ7B/OY7N64NPJdtOgJKT5XphlYl8fP685X0cxuh2K/GP3h3x/QUpVq1HcEwp3769NloOw6PWoyx44jhpdcHHc3q+Ka+Dty+c7MpKlbhFEDekIrCPvXZxj+TlK0uhN980EX+3fd8YZ09F9cl2dHFBtqvdEhrH9ipj+wFkGXzF0ohC2H3LXBr/LKohJKFiojKT/uLa/VEzi7dPNXUIf+DsSTIXsBXdCdgZbflTrYxPX1Bz/2uBY+mRfr4Lfc75vadly6Hh55FI1bx2l7namocmIt9dDfeKPtc99tAYfi9bQ7bmYnrtcWSzmFf2Z0okwGeM9XU0YoN09ntNZ1kXuPmZ6eOnb6upwp3jgp3YTpM4+44YnC7RQaP1mrzYgwqnAIwTIMV2T0ARJaqlq0KEJMwAZCehq9IKLJqQPZshdt6WOxdYD+b6sinNDrD9f7rbH7At/nZ9EH6+8p+LqQb8Ov/m0qF9v5NiV8zz58sf/Hlh1rigDKjOCXiBd3Q+21z0w6M7i7NiLtxwx8UbIARdaSSxUTIoHBr17ma52TdbNihz9PUZmhsicE3ZNFP6+rEXMTtBkHBo9VeRlm/bFZnPHT8qXOxqJWWtLdfTOdRN9jPhuRDpNy0xdZ2LAqvc1vlT7/Ghxn6HDEdJhwYpqOX5gT1HByo5XFN5VTWAYikHRMru6tvnk3vGjjhm9xJ4Vpv11gXkgFsFEDuFgNwHQiTQCDzIr3SJfTJ7K/04fyshyCVyvc29hP8WUa/7zTYCIL8kT7iS1+49ZHL4v4x1XFBHTIiNEhPOs0FePDpK/pR7r/1bTcdwrMhmSFfsrqjcqRWG/vo3zOh7agej9YBGDGD2STZ6U7AfCzqz5eZvOeYnfU2y7pdE7FIw/WDd1by1/nQUc/xNRgYXJrX8WMz5696TCOq5XGE/r1qVwEI3+gp4XYDFL7uft4sjlfW0vos/gHfpHZdvtvpsLiBkZ9OcPMChZ38XFPvcgxkvleCKCz98w+NnmBYvvf+2skv3Hrofmr8S5JcHPTCePudmxdU9XOpm6ajMkkX8QHW5PdW0s5/phOQ1KL5kqcDNmsyng9Zxx/KRCz0+7X6UbhUV8bZYCCcX42iO4obO+b8U+Nt/I2KCwHZderCJdnlRXXcTr2TEAAoNvhZUqLy8QvRGbzv9fvCHe8CHN2HquwG3EpDVwXRdTq6J0HcDn/mmFYktqd1uP/gzPNXyryZXhqqU6Tu1S7I6gqqpI3RJI7ggtfk9/zd8h4/07jefvvFafOcjtoRMOd1tF6btUv4ypUmL8rqOgGmo3r77ZtDLy9ENUye0MnjZy65fKBm76PG3/gblU0B2Llt1z5mOe9uOsB+LxvijpvuFalE+RWL0s0BuOmLLGVhlxOVSo8y5FwxA0AV8htUcYc+v/LBZxTYfkNhuiGdKnlLPyiLn3v5F1riwEsu6ke3lKpsnUZ7M9nELjGvpwMuDzUdEEqPkmsiPrcfjVEZtrfr63oawDwWA8/B67n7sFUVAzDPqQ6frkbb984KWTs/SPjeNPymQ7Pfm6qYHI6PHHu6nchoZR+mLQrU8sbbN5sCE8Uk/8ZHxFQiYj0lKM3+JGcTFTf2GMtuykgsvvnDmxNRv6GyDoAy22SIyIX5bW2dSEYqsVPebnp7MtIA8mQ/Pw1QyNR3R0gZ9TzRi3/2sebvfOLVdlSTS0olDfO9rHhg1iewiXz5pIfMEwNVNg2xmUTqyude/vmmuE+YEfrJY58SJXYCNvWzcvHNd26uihKY6YBTx0+vp5XcSr6Y66f0WvxAbfF2+8bERm9CawLssFfVxVHPyUZKTGTnsqnsF6ua7lynmytNFbfKNXX69ddvmf0f9ON8rcrCSqaToTsq87XtOKhQ0kD0YxsptVjV7nCHlSveNHDjs6W7vsUF23sx14Aj9drFSYr+VRgBiIqjf0sVNgdKU+AmYxbAh/3TZjlx8/nSjtyVa6FtMl5v//b/PrKqP6zqjsCCPnTJbAerVJ45mCYDur9buT19fIzAVfW78vcfeN99Geo3nQB9sbyWFjsZoZHdrzeTGdHp82vJOG7KEnaQ6xiJ3hETz9QE0F31wToASpQ++u/FRU7Mv72net4WlXMdlXm78VApHUj93ldXkgfql2+PqUokylFVNGoYFS4D1CFzPebPcuzy1XXZEdkoeIyi9ByyEbrKchN9EqOfsN8lAlBkOgKXnnitJWIzD6SeE24vgcIKAv8wKGGjDS3d31i+P8L9u3MXy+n0YqlMY6OCiuwIm8l9VceNru3nm8md34LuCDSj7fhsOi0w2AXdRCb0/LC6etBGbuZ8Tx073RpkJEs52pxb1rmaFrlSwiwVPDvI75vGQl8mXkg+WL+cRjEOQKcRPVVyrRpVtXUA9MS6Ww9ogwHSLWuTMtscaCICAClV6KXYlttGAdJzVUmSyJBbufjyL7T1h4VLM681k3pySf/2s+amE7/ZkF0S+ZZMxOK//7OHW+IQ8RdLs0zG7DKnH+AZ/Wg82nGQEm39SH1Xx4/Wtz9YX68ytFsMP6fneE/P80VyTp/jCdE5T75ppmz26zz94yQqomy527mQY+UBKkerQ+knqrq+ZK/txly6nXIiIvu60dHAjgPN6zuSf7dj6qKEhv8Hd1otUcHKqqpfnxNJynY6DSXEC+YacFA6/tV1AIpr39PxrvKT7LawjUsFjPb/9RrAN87uK+HrAfnMfjVwxaKL62lH4Fw6LRBFz+k3/JwOirRVTVx99wPvv3yYM/tdQ7va98AxjobcOZp//Ue7B3zUZjYIcjUB+icDjriE0iRR9Tvm76fEZhkdKhVQw1+/N0vNZXDn3RIhqyTGMHVxEMUfrJ17/2b+2jSvD/GOGIh6ILrwvk3RFCMq67U5LtVGAFzDXyikm0b9u3Lhx076kLxwIXvfVxGuEyDU0N0Unx8ggAllkgH1NMC6Knnnv17u1eNL/cLktbtp4zkvRmCWZiUB1Rplss18+4RzDW7+PA3xjO24jWEd8FdLdXUA8rbTUX4+Pf2JdNEAMWadQ/8eNQGUmpyeCrAPzHRHSOOvhtj5b8dtKPlW32P0yN2E0sUIEhk/F3Kcmb4RwCFR3W6ANs6fRtBdY++r7OXVdXxRnDFShY2KhC/JK4sZ/2oyshWBfRLdSy4EHTdC7X9Pv8FaAYdN1e7GK2JIJ4+fOS/szoF9zkW0DnI4FxhUxZUAhchK/ndsZ6tsVTyVpgc0/vjhWw0xBisza3qUIafSCoWqo2CfKwXkuy/ddQGA+4MZ/eurwrMBh26WsZFRHKdTCH0bXTNNMMjWup7ZYle/ly8HHcz2ujhkKs0BkH7DG7fg3e8DlJUEThfHq8aWFNf/1yO3mv/81Scre0P+3sfXzr+rkqY+NbNZh4r0WSX5+j+TnKh8omL6nwnYuBAYxEd+5uk5FcvGbj9PK5nFydmQJY+yhNG/MVjxIdU8dez0nNkJr9/Ug999TSXhWzOPms8AHDTVdQB89rwbUxfC6tJn2Sci2yToRJyo1au/8KfNpC4uLv75U/u2zvjrM2tzMlGXhEwejWwqgnApCX4GIK0KmNhzV1mtoglasAiEiONoQXdj95gLD39Nj7rzX1FyJLocbadz9H3n+U1uwtZ2vGFrFcgXTNa+TNwW0pGYUknc0G/RZ9XdeEYMVNKYHfZw+FS6DNAu+3cpAGlDL/z2t8JX3vPbBEu79L4Rbcs/+eYjt67GR8Ty4vqTbVGSr8/casj4yIpI4jm3ClHaAn8iL/fvQhT5xn07CvcCh4/Z+e/t8tY5myWWJ499anmQEtE2SVHN6QY/fycm2c8Go/+eo7X6qgAOmQpzAJQtgZt/w4fS0w/K7QYgfZJA3gybqjsL0ZbauPqLt5bsPP3wzO9/4+OvLNWSI2v6vuek64hknZB8sZ+Svm6B8Cersr8FOLRKHP17pkS0rG5Hxg6m1j6jfxxG1a0CELIduXbe8Rvf+7kBWyqoOM8usmJ8vnrgktx6b23lkVsLYgi///E/e+5efO+2bvGbuq8x5U4sC+fn55afg++I+IL9tpBRmrLQFsBhY0bL9f0ZLcfbtXOjbv87uMms0Q5UocI6APGyLwHkM//T/7pRtxtwu1oAKht5F9kIgjyhf/aHK794a2NlJmy1wDc++srcNz76nev691f1vX84m793S/6yrH/lchDcidnOicoa/a7zXhbAYaOSK/s1WjYJgcm9aFa/Rytai59cnIQ92YFxqawD8E9fn2/pDxf1EL9th9XS7BBsW32VZPV30t3w/NY4frRtuL0CXbDAdBoaYkts6GjAym4dAfP9P/jYd1Z0C39d//6c/765ochu8Wc7AS4hUbolCfYgVdib0M9MpD/4kfk7fn19tiWAw0SqKyZUL/aR6QTcvvPirNjPDraOYtRkPLvffwsw6SqtA/DP/vLMZSGTeT+HmBb+dyGAtEPgGt/IdQXyzLuO/XLt95Q7wBT42JK3dURgyd+Pmedf+egrS8l2tKbMz5PCaN4ckG9DkK3n7+iBCB8cyE7AFy268gGhTv7a+iwXDhwmm+lo+e2bwUvqRmVG5km9Nq3KXZtvtthdTh6ozbqthYFDbWxr2f/44euNJIme18PuGeF2ArR1ALImXnSk3Lls/KxbkGflpd0GFyhoq0hc1d94zhQUElkL7zbxsSv8hLszd9PS1fXxd+xWJ4iO+v+tbSmWGfX3ZorHRNvxRr/jbt+5MbbXG4SYPn5mde9lgAV2d7N2x9a0Y2JeXzKOm/pt+cyA2zKnZLrFrvhW8sHaKpX+gNzYL8h/9PCLC7rlXdIXnIbwmwJm2YLpVrmyMD63ZFfnoGN23jXspjPhagu5wXyhkc86A4XGvljaz/+qvghKefEz67P7VocAQLiHjj81kyS1xi7bMhv7ujUzcD+ZmBHZ/3z4RlO3wEvSNfqq2OjLfEWgyDMFHdtYZ4sGOzoLMosU+NG8je+LbJ1BcWsfmxSQHvMjpZKvvT+qX15cn+XiAQC470xUSNZMC8Si1tQhgOd8tN6H7ZXbS9g10HaaXnbMB2Q/y2oMC6myY+2IXiR5GMFu9eu+J30UIBLXlKxd/Oz6bFsAAHCfmsg52T966KUZVVPP6yb9hCsQILvm7oWbq097Aba6sP2xb+iVH+fn0wVKuTRDaRccKh8NcJ2EVqzE8me//1hLAABwn5vopKxvPvziQiSipTShT/rwvs/g7wz1mx/bzXtkVkWwK0/AJxk6fqpBh/ul/NJnvvcYmf0AgENj4rOyzdbA22J7QbfeS+k3CgmAhuqY53cLA7OZAWlLDUhXYFBmYYF0QaASyZfq9aPM8wMADp2J7wB4K7ojUBPJkj7jBeH2DvYL+FWe1KdUXsJXKLeUUBZWE7hoQKtWP7K4yDw/AOCQOjAdAO+bD7+0IEw0QKpGx7p95VcO+rT+ziWErnPwViKTxU9//8mWAADgEDtwHQDPdAR0g74kItGwywP9tr0dBXz8ssG/099c/pevPsE8PwAA4gB3AIx0WiDSnQClnlNuHZ8P/dsFAqZXkFwR7/5Uc7HNPD8AAN6B7gB4aUdAqku6E3BWKb++P2opEV9cfPVT1PwGAKDLfdEB8FYeeWlGyGhKbIv24utPtgUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwH/gHDBh9PrG772gAAAAASUVORK5CYII=
    marketplace.cloud.google.com/deploy-info: '{"partner_id": "polygon", "product_id": "polygon-id-issuer", "partner_name": "polygon"}'
  labels:
    app.kubernetes.io/name: "polygon"
spec:
  descriptor:
    type: "Polygon"
    version: '1.0.0'
    description: |-
      Kubernetes based installation for the Polygon ID Issuer Node powered by Polygon.
    maintainers:
    - name: Polygon
      url: https://polygon.technology/polygon-id
    links:
    - description: 'Official documentation for the GCP offering of Polygon ID Issuer Node'
      url: https://0xpolygonid.github.io/tutorials/issuer-node/getting-started-flow/
    notes: |-
      Post Installation, Browse to the Ingress (app-ingress or ui-ingress) and click on the ip address uner the 'Routes'.
      
  selector:
    matchLabels:
      app.kubernetes.io/name: "polygon"
  componentKinds:
  - group: apps/v1
    kind: Deployment
  - group: v1
    kind: ConfigMap
  - group: v1
    kind: Secret
  - group: v1
    kind: Service
  - group: v1
    kind: PersistentVolumeClaim
  - group: networking.k8s.io
    kind: Ingress
---
# Source: polygon-id-issuer/templates/managed-certs.yaml
apiVersion: networking.gke.io/v1
kind: ManagedCertificate
metadata:
  name: polygon-cert
spec:
  domains:
    - app.example.com
    - ui.example.com
